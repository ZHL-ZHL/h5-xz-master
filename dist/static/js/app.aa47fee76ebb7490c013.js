webpackJsonp([18],{"/wAz":function(e,n){},"4ml/":function(e,n){},"6L0m":function(e,n){},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("7+uW"),r={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var o=t("VU/8")({name:"App"},r,!1,function(e){t("XN2c")},null,null).exports,i=t("/ocq"),c=i.a.prototype.push;i.a.prototype.push=function(e){return c.call(this,e).catch(function(e){return e})},a.a.use(i.a);var s=new i.a({routes:[{path:"/main",name:"main",component:function(e){return Promise.all([t.e(0),t.e(12)]).then(function(){var n=[t("VZrM")];e.apply(null,n)}.bind(this)).catch(t.oe)},children:[]},{path:"/mianSecond/:id",name:"mianSecond",props:!0,component:function(e){return Promise.all([t.e(0),t.e(9)]).then(function(){var n=[t("ds1e")];e.apply(null,n)}.bind(this)).catch(t.oe)}},{path:"/mianItem/:id",name:"mianItem",props:!0,component:function(e){return Promise.all([t.e(0),t.e(11)]).then(function(){var n=[t("LIzM")];e.apply(null,n)}.bind(this)).catch(t.oe)}},{path:"/CardRecordsItem/:type/:id/:isdailyfortune",name:"CardRecordsItem",props:!0,component:function(e){return Promise.all([t.e(0),t.e(4)]).then(function(){var n=[t("0b1b")];e.apply(null,n)}.bind(this)).catch(t.oe)}},{path:"/history/:id",name:"mainhistory",props:!0,component:function(e){return t.e(0).then(function(){var n=[t("8QZE")];e.apply(null,n)}.bind(this)).catch(t.oe)}},{path:"/",redirect:"/main"},{path:"/home",name:"home",component:function(e){return t.e(15).then(function(){var n=[t("j7e0")];e.apply(null,n)}.bind(this)).catch(t.oe)}},{path:"/detail/:id",name:"detail",props:!0,component:function(e){return Promise.all([t.e(0),t.e(5)]).then(function(){var n=[t("SJaG")];e.apply(null,n)}.bind(this)).catch(t.oe)}},{path:"/my",name:"my",component:function(e){return Promise.all([t.e(0),t.e(2)]).then(function(){var n=[t("6wMn")];e.apply(null,n)}.bind(this)).catch(t.oe)}},{path:"/buyVIP",name:"buyVIP",component:function(e){return t.e(7).then(function(){var n=[t("emDE")];e.apply(null,n)}.bind(this)).catch(t.oe)}},{path:"/bindPhone/:openid",name:"bindPhone",props:!0,component:function(e){return Promise.all([t.e(0),t.e(13)]).then(function(){var n=[t("Wg+5")];e.apply(null,n)}.bind(this)).catch(t.oe)}},{path:"/question",name:"question",component:function(e){return Promise.all([t.e(0),t.e(8)]).then(function(){var n=[t("NtIj")];e.apply(null,n)}.bind(this)).catch(t.oe)}},{path:"/message",name:"message",component:function(e){return Promise.all([t.e(0),t.e(14)]).then(function(){var n=[t("KPGV")];e.apply(null,n)}.bind(this)).catch(t.oe)}},{path:"/login",name:"login",component:function(e){return Promise.all([t.e(0),t.e(3)]).then(function(){var n=[t("lmfZ")];e.apply(null,n)}.bind(this)).catch(t.oe)}},{path:"/wlogin",name:"wlogin",component:function(e){return Promise.all([t.e(0),t.e(16)]).then(function(){var n=[t("N1If")];e.apply(null,n)}.bind(this)).catch(t.oe)}},{path:"/register",name:"register",component:function(e){return Promise.all([t.e(0),t.e(6)]).then(function(){var n=[t("tcoL")];e.apply(null,n)}.bind(this)).catch(t.oe)}},{path:"/history/:id",name:"history",props:!0,component:function(e){return t.e(0).then(function(){var n=[t("8QZE")];e.apply(null,n)}.bind(this)).catch(t.oe)}},{path:"/messageAndriod",name:"messageAndriod",component:function(e){return Promise.all([t.e(0),t.e(1)]).then(function(){var n=[t("owW+")];e.apply(null,n)}.bind(this)).catch(t.oe)}},{path:"/testList",name:"testList",component:function(e){return Promise.all([t.e(0),t.e(10)]).then(function(){var n=[t("eMp8")];e.apply(null,n)}.bind(this)).catch(t.oe)}}],linkActiveClass:"on"}),u=(t("sVYa"),t("/wAz"),t("6L0m"),t("VaBq"),t("Fd2+")),l=(t("4ml/"),/(\d{3})(?=\d)/g);var p=t("//Fk"),h=t.n(p),m=t("mtWM"),d=t.n(m).a.create({baseURL:"https://www.morninghappy.cn/mh-mall-web-api/"});d.interceptors.request.use(function(e){return localStorage.getItem("token")&&(e.headers.token=localStorage.getItem("token")),e},function(e){return h.a.reject(e)}),d.interceptors.response.use(function(e){return e.data},function(e){if("401"==e.response.data.code){console.log(s);var n=new RegExp("(^|&)code=([^&]*)(&|$)"),t=window.location.search.substr(1).match(n);if(t&&t[2])return;return localStorage.setItem("url",location.href),"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?s.push("/wlogin"):s.push("/login"),h.a.reject(e)}return e.response.data.message&&(a.a.prototype.$message({type:"error",message:e.response.data.msg}),401===e.response.status&&s.push("/login")),h.a.reject(e)});var f,g=d,w=t("bOdI"),v=t.n(w),b=t("Xxa5"),y=t.n(b),x=t("exGp"),P=t.n(x),k={created:function(){var e=this;return P()(y.a.mark(function n(){var t,a;return y.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=e.getUrlParam("code"))){n.next=10;break}return n.next=4,e.getOpenid(t);case 4:return a=n.sent,n.next=7,e.wLongin(a);case 7:n.sent,n.next=10;break;case 10:case"end":return n.stop()}},n,e)}))()},methods:(f={getUrlParam:function(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(n);return null!=t?unescape(t[2]):null},getOpenid:function(e){var n=this;return P()(y.a.mark(function t(){var a;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.$http.get("auth/wx/openid/"+e);case 2:return a=t.sent,t.abrupt("return",a.data.open_id);case 4:case"end":return t.stop()}},t,n)}))()},wLongin:function(e){var n=this;return P()(y.a.mark(function t(){var a,r;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.$http.post("auth/wx/login/"+e);case 2:if(40008!=(a=t.sent).code){t.next=7;break}n.$router.push({name:"bindPhone",params:{openid:e}}),t.next=18;break;case 7:if(200!=a.code){t.next=17;break}return localStorage.setItem("token",a.data.token),t.next=11,n.$http.get("auth/info");case 11:200==(r=t.sent).code&&(localStorage.setItem("nickname",r.data.nickname),localStorage.setItem("gender",r.data.gender),localStorage.setItem("avatar",r.data.avatar),localStorage.setItem("level",r.data.level)),n.getCookie("url")?window.location.href=localStorage.getItem("url"):setTimeout(function(){n.$router.push({name:"main"}),location.reload()},500),t.next=18;break;case 17:alert(a.msg);case 18:case"end":return t.stop()}},t,n)}))()}},v()(f,"getUrlParam",function(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(n);return null!=t?unescape(t[2]):null}),v()(f,"getRequest",function(){window.location.href.replace(/[/]/g,"%2f").replace(/[:]/g,"%3a").replace(/[#]/g,"%23").replace(/[&]/g,"%26").replace(/[=]/g,"%3d");var e="https://www.morninghappy.cn/mh-mall-web-api/auth/wx/receive_code";e=location.href,e=localStorage.getItem("url"),e=encodeURIComponent(e),console.log(e);this.getCookie("url");var n="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxb3f4414e7bfb9c9e&redirect_uri="+e+"&response_type=code&scope=snsapi_userinfo&state=STATE&connect_redirect=1#wechat_redirect";return window.location.href=n,n}),v()(f,"wechateLogin",function(){var e=this;return P()(y.a.mark(function n(){var t;return y.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=e.getRequest(),console.log(t);case 2:case"end":return n.stop()}},n,e)}))()}),f)};a.a.config.productionTip=!1,a.a.filter("cy",function(e,n,t){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";n=null!=n?n:"",t=null!=t?t:2;var a=Math.abs(e).toFixed(t),r=t?a.slice(0,-1-t):a,o=r.length%3,i=o>0?r.slice(0,o)+(r.length>3?",":""):"",c=t?a.slice(-1-t):"";return(e<0?"-":"")+n+i+r.slice(o).replace(l,"1,")+c}),a.a.use(u.b),a.a.prototype.$http=g,a.a.mixin(k),a.a.filter("dd",function(e){var n=e?new Date(e):new Date;return n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate()}),new a.a({el:"#app",router:s,components:{App:o},template:"<App/>"})},VaBq:function(e,n){},XN2c:function(e,n){}},["NHnr"]);
//# sourceMappingURL=app.aa47fee76ebb7490c013.js.map