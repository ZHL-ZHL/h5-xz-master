webpackJsonp([16],{CdhG:function(e,t){},N1If:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),r=n.n(a),o=n("exGp"),i=n.n(o),c=n("bOdI"),s=n.n(c),u=(n("NC6I"),n("mtWM"),{data:function(){return s()({mobile:"",code:"",res:"",time:60,isShow:!0,timer:null},"code","")},updated:function(){},mounted:function(){},created:function(){var e=this;return i()(r.a.mark(function t(){var n,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.getUrlParam("code"))){t.next=10;break}return t.next=4,e.getOpenid(n);case 4:return a=t.sent,t.next=7,e.wLongin(a);case 7:t.sent,t.next=11;break;case 10:e.wechateLogin();case 11:case"end":return t.stop()}},t,e)}))()},methods:{setCookie:function(e,t){var n=new Date;n.setTime(n.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()},getCookie:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var n=getCookie(e);null!=n&&(document.cookie=e+"="+n+";expires="+t.toGMTString())},getContent:function(){var e=iframe.contentWindow.document.getElementById("iToolCode");if(e){var t=e.innerHTML;t=t.replace(/<span.+?>/g,"").replace(/<\/span>/g,""),t=JSON.parse(t),this.res=t}else setTimeout(this.getContent,200)},login:function(){var e=this;return i()(r.a.mark(function t(){var n,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(/^\d{11}$/.test(e.mobile)){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,e.$http.post("auth/verification_code/login",{mobile:e.mobile,code:e.code});case 4:if(200!=(n=t.sent).code){t.next=14;break}return localStorage.setItem("token",n.data.token),t.next=9,e.$http.get("auth/info");case 9:200==(a=t.sent).code&&(localStorage.setItem("nickname",a.data.nickname||"手机用户"+a.data.mobile.substr(-4)),localStorage.setItem("gender",a.data.gender),localStorage.setItem("avatar",a.data.avatar),localStorage.setItem("level",a.data.level)),e.$router.push({name:"main"}),t.next=14;break;case 14:case"end":return t.stop()}},t,e)}))()},getValidCode:function(){var e=this;return i()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("sms/send/"+e.mobile+"/4");case 2:200==t.sent.code&&(e.isShow=!1,e.timer=setInterval(function(){e.$nextTick(function(){e.time--}),e.time<=0&&(e.isShow=!0,clearInterval(e.timer),e.timer=null,e.time=60)},1e3));case 4:case"end":return t.stop()}},t,e)}))()}}}),d={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var l=n("VU/8")(u,d,!1,function(e){n("CdhG")},"data-v-18baacc1",null);t.default=l.exports}});
//# sourceMappingURL=16.0a55a9ddfbaee7485856.js.map